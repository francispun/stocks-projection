<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tesla Q2 2025 Financial Model (Simplified)</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input[type="range"] { width: 100%; }
        .output { font-weight: bold; margin-top: 10px; }
        .tesla-fact { background: #f0f8ff; padding: 10px; border-left: 4px solid #1e90ff; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Tesla Q2 2025 Financial Relationship Explorer</h1>
    <p>Simplified: No tax/interest. Adjust values to see margin → EPS linkage. Assumptions: Net Income ≈ Operating Income; Annual EPS = 4 × Quarterly EPS.</p>
    <div class="tesla-fact">Actual Q2: Revenue $22.5B | Op. Margin 4.1% | Non-GAAP EPS $0.40 | Shares 3,519M | Price $438</div>

    <div class="input-group">
        <label for="quarterlyEps">Quarterly EPS (non-GAAP): <span id="quarterlyEpsValue">0.40</span></label>
        <input type="range" id="quarterlyEps" min="0" max="2" step="0.01" value="0.40">
        <input type="number" id="quarterlyEpsNum" min="0" step="0.01" value="0.40">
    </div>

    <div class="input-group">
        <label for="peRatio">PE Ratio: <span id="peRatioValue">257</span></label>
        <input type="range" id="peRatio" min="1" max="500" step="1" value="257">
        <input type="number" id="peRatioNum" min="1" step="1" value="257">
    </div>

    <div class="input-group">
        <label for="opMargin">Operating Profit Margin (%): <span id="opMarginValue">4.1</span></label>
        <input type="range" id="opMargin" min="0" max="50" step="0.1" value="4.1">
        <input type="number" id="opMarginNum" min="0" step="0.1" value="4.1">
    </div>

    <div class="input-group">
        <label for="shares">Shares Outstanding (millions): <span id="sharesValue">3519</span></label>
        <input type="range" id="shares" min="1" max="10000" step="10" value="3519">
        <input type="number" id="sharesNum" min="1" step="10" value="3519">
    </div>

    <div class="input-group">
        <label for="revenue">Quarterly Revenue (millions): <span id="revenueValue">22496</span></label>
        <input type="range" id="revenue" min="0" max="50000" step="100" value="22496">
        <input type="number" id="revenueNum" min="0" step="100" value="22496">
    </div>

    <div class="output">
        <h2>Model Outputs (Annualized)</h2>
        <p>Annual EPS (from input): <span id="annualEps"></span></p>
        <p>Implied Stock Price (from input EPS): <span id="stockPrice"></span></p>
        <p>Annual Operating Profit Needed (millions): <span id="opNeeded"></span></p>
        <p>Implied Annual Revenue Needed (millions): <span id="revenueNeeded"></span></p>
        <hr>
        <h3>Margin → EPS Linkage (at Input Revenue)</h3>
        <p>Implied Quarterly EPS: <span id="impliedQuarterlyEps"></span></p>
        <p>Implied Annual EPS: <span id="impliedAnnualEps"></span></p>
        <p>Implied Stock Price: <span id="impliedStockPrice"></span></p>
        <p>Required Margin for Target EPS (%): <span id="requiredMargin"></span></p>
        <p>Breakeven Revenue if Margin Drops to 1% (millions): <span id="breakevenRevenue"></span></p>
    </div>

    <script>
        const inputs = {
            quarterlyEps: document.getElementById('quarterlyEps'),
            quarterlyEpsNum: document.getElementById('quarterlyEpsNum'),
            peRatio: document.getElementById('peRatio'),
            peRatioNum: document.getElementById('peRatioNum'),
            opMargin: document.getElementById('opMargin'),
            opMarginNum: document.getElementById('opMarginNum'),
            shares: document.getElementById('shares'),
            sharesNum: document.getElementById('sharesNum'),
            revenue: document.getElementById('revenue'),
            revenueNum: document.getElementById('revenueNum')
        };

        const values = {
            quarterlyEpsValue: document.getElementById('quarterlyEpsValue'),
            peRatioValue: document.getElementById('peRatioValue'),
            opMarginValue: document.getElementById('opMarginValue'),
            sharesValue: document.getElementById('sharesValue'),
            revenueValue: document.getElementById('revenueValue')
        };

        const outputs = {
            annualEps: document.getElementById('annualEps'),
            stockPrice: document.getElementById('stockPrice'),
            opNeeded: document.getElementById('opNeeded'),
            revenueNeeded: document.getElementById('revenueNeeded'),
            impliedQuarterlyEps: document.getElementById('impliedQuarterlyEps'),
            impliedAnnualEps: document.getElementById('impliedAnnualEps'),
            impliedStockPrice: document.getElementById('impliedStockPrice'),
            requiredMargin: document.getElementById('requiredMargin'),
            breakevenRevenue: document.getElementById('breakevenRevenue')
        };

        function syncSliderAndInput(slider, input, valueSpan) {
            slider.addEventListener('input', () => {
                input.value = slider.value;
                valueSpan.textContent = slider.value;
                calculate();
            });
            input.addEventListener('input', () => {
                slider.value = input.value;
                valueSpan.textContent = input.value;
                calculate();
            });
        }

        syncSliderAndInput(inputs.quarterlyEps, inputs.quarterlyEpsNum, values.quarterlyEpsValue);
        syncSliderAndInput(inputs.peRatio, inputs.peRatioNum, values.peRatioValue);
        syncSliderAndInput(inputs.opMargin, inputs.opMarginNum, values.opMarginValue);
        syncSliderAndInput(inputs.shares, inputs.sharesNum, values.sharesValue);
        syncSliderAndInput(inputs.revenue, inputs.revenueNum, values.revenueValue);

        function calculate() {
            const qEps = parseFloat(inputs.quarterlyEps.value);
            const pe = parseFloat(inputs.peRatio.value);
            const margin = parseFloat(inputs.opMargin.value) / 100;
            const shares = parseFloat(inputs.shares.value);
            const qRevenue = parseFloat(inputs.revenue.value);

            // Back-calc from EPS (original)
            const annualEps = qEps * 4;
            const stockPrice = (pe * annualEps).toFixed(2);
            const annualNet = annualEps * shares;  // Annual net income needed
            const opNeeded = annualNet.toFixed(2);  // Assume op = net
            const revenueNeeded = (margin > 0 ? (annualNet / margin).toFixed(2) : 'Infinite');

            // Forward-calc from revenue/margin
            const qOp = qRevenue * margin;
            const qNet = qOp;  // Simplified assumption
            const impliedQEps = (shares > 0 ? (qNet / shares).toFixed(2) : '0');
            const impliedAnnualEps = (parseFloat(impliedQEps) * 4).toFixed(2);
            const impliedStockPrice = (pe * parseFloat(impliedAnnualEps)).toFixed(2);

            // Required margin for target EPS (at input revenue)
            const requiredAnnualOp = annualNet;
            const requiredMargin = (qRevenue > 0 ? ((requiredAnnualOp / (qRevenue * 4)) * 100).toFixed(1) : 'Infinite');

            // Breakeven at 1% margin
            const breakevenMargin = 0.01;
            const breakevenRevenue = (breakevenMargin > 0 ? (annualNet / breakevenMargin).toFixed(2) : 'Infinite');

            outputs.annualEps.textContent = annualEps.toFixed(2);
            outputs.stockPrice.textContent = `$${stockPrice}`;
            outputs.opNeeded.textContent = `$${opNeeded}`;
            outputs.revenueNeeded.textContent = `$${revenueNeeded}`;
            outputs.impliedQuarterlyEps.textContent = impliedQEps;
            outputs.impliedAnnualEps.textContent = impliedAnnualEps;
            outputs.impliedStockPrice.textContent = `$${impliedStockPrice}`;
            outputs.requiredMargin.textContent = `${requiredMargin}%`;
            outputs.breakevenRevenue.textContent = `$${breakevenRevenue}`;
        }

        calculate(); // Initial calculation
    </script>
</body>
</html>
